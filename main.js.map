{"version":3,"file":"main.js","mappings":"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","sources":["webpack://mesto-project-ff/./src/scripts/modal.js","webpack://mesto-project-ff/./src/scripts/card.js","webpack://mesto-project-ff/./src/scripts/api.js","webpack://mesto-project-ff/./src/scripts/validation.js","webpack://mesto-project-ff/./src/scripts/index.js"],"sourcesContent":["// отрытия МО\nfunction openPopup(popup) {\n  popup.classList.add('popup_is-opened');\n  document.addEventListener('keydown', escapeHandler);\n  popup.addEventListener('click', closeByOverlay);\n};\n\n// закрытиe МО\nfunction closePopup(popup) {\n  popup.classList.remove('popup_is-opened');\n  document.removeEventListener('keydown', escapeHandler);\n  popup.removeEventListener('click', closeByOverlay);\n};\n\n// закрытие МО по Esc\nfunction escapeHandler (evt) {\n  if (evt.key === \"Escape\") {\n    closePopup(document.querySelector('.popup_is-opened'));\n  };\n};\n\n// Закрытие МО по оверлей\nfunction closeByOverlay(item) {\n  if (item.target === item.currentTarget){\n    closePopup(item.target);\n  }\n};\n\nexport { openPopup, closePopup}","export function createCard(cardContent, user, showImage, remove, disLike, setLike) {\n\n  const cardTemplate = document.querySelector('#card-template').content;\n\n  const cardItem = cardTemplate.querySelector('.card').cloneNode(true);\n  const cardImage = cardItem.querySelector('.card__image');\n  const cardTitle = cardItem.querySelector('.card__title')\n  const deleteButton = cardItem.querySelector('.card__delete-button');\n  const likeButton = cardItem.querySelector('.card__like-button');\n  const likeCount = cardItem.querySelector('.card__like-count');\n\n  cardImage.src = cardContent.link;\n  cardImage.alt = cardContent.name;\n  cardTitle.textContent = cardContent.name;\n\n  // Проверка пользователя у карточек\n  if (cardContent.owner._id !== user._id) {\n    deleteButton.style.display = 'none';\n    deleteButton.disabled = true;\n  };\n\n  // Проверка userID у LIKE\n  const matchUserId = cardContent.likes.some((id) => {return id._id === user._id});\n  if (matchUserId) {\n    likeButton.classList.add('card__like-button_is-active');\n  } else {\n    likeButton.classList.remove('card__like-button_is-active');\n  }\n\n  likeCount.textContent = cardContent.likes.length;\n\n  deleteButton.addEventListener('click', () => remove(cardItem, cardContent));\n\n  likeButton.addEventListener('click', (evt) => {\n    \n    if (evt.target.classList.contains('card__like-button_is-active')) {\n      disLike(evt.target, cardContent._id);\n      evt.target.classList.remove('card__like-button_is-active')\n    } else {\n      setLike(evt.target, cardContent._id);\n      evt.target.classList.add('card__like-button_is-active')\n    }\n  });\n  \n  cardImage.addEventListener('click', showImage);\n\n  return cardItem;\n};\n\n// удаление карточки\nexport function deleteCard(element, message) {\n  element.remove();\n  console.log(message);\n}\n\n// счетчик лайков\nexport const setCount = (evt, count) => {\n  console.log(evt.nextElementSibling.textContent)\n  evt.nextElementSibling.textContent = count;\n}\n\n","const config = {\n  baseUrl: 'https://nomoreparties.co/v1/wff-cohort-29',\n  headers: {\n    authorization: '2a027149-b10c-4632-913a-0fa2880270f5',\n    'Content-Type': 'application/json'\n  }\n}\n\nconst handleResponse = (res) => {\n  if (res.ok) {\n    return res.json()\n  }\n    return Promise.reject(`Ошибка: ${res.status}`);\n};\n\n// Запрос массива карточек\nexport const getCards = () => {\n  return fetch (`${config.baseUrl}/cards`, {\n    headers: config.headers\n  })\n  .then(handleResponse)\n}\n\n// Запрос данных пользователя\nexport const getUser = () => {\n  return fetch (`${config.baseUrl}/users/me`, {\n    headers: config.headers\n  })\n  .then(handleResponse)\n}\n\n// Запрос на УДАЛЕНИЕ карточки\nexport const deleteCardAPI = (cardId) => {\n  return fetch(`${config.baseUrl}/cards/${cardId}`, {\n    method: 'DELETE',\n    headers:  config.headers,\n    body: JSON.stringify({\n      _id: cardId\n    })\n  })\n  .then(handleResponse)\n}\n\n// Запрос на размещение данных НОВОЙ карточки\nexport const postCard = (newName, newLink) => {\n  return fetch(`${config.baseUrl}/cards`, {\n    method: 'POST',\n    headers: config.headers,\n    body: JSON.stringify({\n      name: newName,\n      link: newLink\n    })\n  })\n  .then(handleResponse)\n}\n\n// Запрос при постановке LIKE\nexport const putLike = (cardId) => {\n  return fetch(`${config.baseUrl}/cards/likes/${cardId}`, {\n    method: 'PUT',\n    headers: config.headers,\n    body: JSON.stringify({\n      _id: cardId\n    })\n  })\n  .then(handleResponse)\n}\n\n// Запрос при снятии LIKE\nexport const deleteLike = (cardId) => {\n  return fetch(`${config.baseUrl}/cards/likes/${cardId}`, {\n    method: 'DELETE',\n    headers: config.headers,\n    body: JSON.stringify({\n      _id: cardId\n    })\n  })\n  .then(handleResponse)\n}\n\n// редактирование ПРОФИЛЯ\nexport const editUser = (newName, newDecription) => {\n  return fetch(`${config.baseUrl}/users/me`, {\n    method: 'PATCH',\n    headers: config.headers,\n    body: JSON.stringify({\n      name: newName,\n      about: newDecription\n    })\n  })\n  .then(handleResponse)\n};\n\n// редактирование АВАТАРА\nexport const editAvatar = (newAvatar) => {\n  return fetch(`${config.baseUrl}/users/me/avatar`, {\n    method: 'PATCH',\n    headers: config.headers,\n    body: JSON.stringify({\n      avatar: newAvatar\n    })\n  })\n  .then(handleResponse)\n};","export const config = {\n  formSelector: '.popup__form',\n  inputSelector: '.popup__input',\n  submitButtonSelector: '.popup__button',\n  inactiveButtonClass: 'popup__button_disabled',\n  inputErrorClass: 'popup__input_type_error',\n  errorClass: 'popup__error_visible'\n}\n\n// добавление классов с ошибкой\nconst showError = (formElement, inputElement, errorMessage) => {\n  const errorElement = formElement.querySelector(`.${inputElement.id}-error`);\n  inputElement.classList.add(config.inputErrorClass);\n  errorElement.classList.add(config.errorClass);\n  errorElement.textContent = errorMessage;\n};\n\n// удаление классов с ошибкой\nconst hideError = (formElement, inputElement) => {\n  const errorElement = formElement.querySelector(`.${inputElement.id}-error`);\n  inputElement.classList.remove(config.inputErrorClass);\n  errorElement.classList.remove(config.errorClass);\n  errorElement.textContent = '';\n};\n\n// проверка валидности полей\nconst isValid = (formElement, inputElement) => {\n\n  if (inputElement.validity.patternMismatch) {\n    inputElement.setCustomValidity(inputElement.dataset.errorMessage);\n  } else {\n    inputElement.setCustomValidity(\"\");\n  }\n\n  if (!inputElement.validity.valid) {\n    showError(formElement, inputElement, inputElement.validationMessage);\n  } else {\n    hideError(formElement, inputElement);\n  }\n};\n\n// поиск невалидного поля: метод some\nconst hasInvalidInput = (inputList) => {\n  return inputList.some((inputElement) => {\n    return !inputElement.validity.valid;\n  });\n}\n\n// зависимость состояния кнопок\nconst toggleButtonState = (inputList, buttonElement) => {\n  if (hasInvalidInput(inputList)) {\n    buttonElement.disabled = true;\n    buttonElement.classList.add(config.inactiveButtonClass);\n  } else {\n    buttonElement.disabled = false;\n    buttonElement.classList.remove(config.inactiveButtonClass);\n  }\n};\n\n// слушатеи на полях ввода\nconst setEventListeners = (formElement) => {\n  const buttonElement = formElement.querySelector(config.submitButtonSelector);\n  const inputList = Array.from(formElement.querySelectorAll(config.inputSelector));\n\n  toggleButtonState(inputList, buttonElement);\n  inputList.forEach((inputElement) => {\n    inputElement.addEventListener('input', () => {\n      isValid(formElement, inputElement);\n      toggleButtonState(inputList, buttonElement);\n    });\n  });\n};\n\nexport const enableValidation = () => {\n  const formList = Array.from(document.querySelectorAll(config.formSelector));\n  formList.forEach((formElement) => {\n    setEventListeners(formElement);\n  });\n};\n\n// Функция для очистки ошибок валидации\nexport const clearValidation = (formElement, config) => {\n  const inputList = Array.from(formElement.querySelectorAll(config.inputSelector));\n  const buttonElement = formElement.querySelector(config.submitButtonSelector);\n  \n  inputList.forEach((inputElement) => {\n      hideError(formElement, inputElement);\n      inputElement.value = ''; // сброс инпутов\n  });\n\n  toggleButtonState(inputList, buttonElement);\n};","import '../pages/index.css';\nimport {closePopup, openPopup} from './modal.js';\nimport {createCard, deleteCard, setCount} from './card.js';\nimport {getCards,\n        getUser,\n        deleteCardAPI,\n        postCard,\n        putLike,\n        deleteLike,\n        editUser,\n        editAvatar\n       } from './api.js';\nimport {enableValidation,\n        clearValidation,\n        config\n       } from './validation.js';\n\n// кнопки \"редактировать\", \"добавить\", \"закрыть\"\nconst editButton = document.querySelector('.profile__edit-button');\nconst addButton = document.querySelector('.profile__add-button');\nconst closeButtons = document.querySelectorAll('.popup__close');\nconst avatarButton = document.querySelector('.profile__image-button');\n\n// модальные окна (МО)\nconst popupEdit = document.querySelector('.popup_type_edit');\nconst popupNewCard = document.querySelector('.popup_type_new-card');\nconst popupImage = document.querySelector('.popup_type_image');\nconst popupAvatar = document.querySelector('.popup_type_avatar');\n\n// массив МО\nconst popups = [popupEdit, popupNewCard, popupImage, popupAvatar];\n\n// формы МО\nconst editProfile = document.forms.editProfile;\nconst newPlace = document.forms.newPlace;\nconst newAvatar = document.forms.newAvatar;\n\n// поля МО ПРОФИЛЬ\nconst profileTitle = document.querySelector('.profile__title');\nconst profileDescription = document.querySelector('.profile__description');\n// поле МО АВАТАР\nconst profileAvatar = document.querySelector('.profile__image');\n\n// контейнер списка карточек\nconst placesList = document.querySelector('.places__list');\n\n// заполнение полей МО ПРОФИЛЬ\nfunction typeFields () {\n  editProfile.name.value = profileTitle.textContent;\n  editProfile.description.value = profileDescription.textContent;\n};\n\n// слушатель на кнопке ПРОФИЛЬ\neditButton.addEventListener('click', function() {\n  clearValidation(popupEdit, config);\n  typeFields(); //заполнение полей формы\n  openPopup(popupEdit);\n});\n\n// слушатель на кнопке ДОБАВИТЬ карточку\naddButton.addEventListener('click', function() {\n  clearValidation(popupNewCard, config);\n  openPopup(popupNewCard);\n});\n\n\n// слушатель на кнопке АВАТАР\navatarButton.addEventListener('click', function() {\n  clearValidation(popupAvatar, config);\n  openPopup(popupAvatar);\n})\n\n// слушатель на массиве кнопок ЗАКРЫТЬ\ncloseButtons.forEach((btn) => {\n  const popup = btn.closest('.popup')\n  btn.addEventListener('click', () => {\n      closePopup(popup);\n  });\n});\n\n// сборка МО с изображением\nfunction createImagePopup (evt) {\n  const image = document.querySelector('.popup__image');\n  const caption = document.querySelector('.popup__caption');\n  image.src = evt.target.src;\n  image.alt = evt.target.alt\n  caption.textContent = evt.target.alt;\n}\n\n// открытия МО с изображением\nfunction showImage (evt) {\n  if (evt.target.classList.contains('card__image')) {\n    createImagePopup(evt);\n    openPopup(popupImage);\n  };\n}\n\n// слушатель на форме ПРОФИЛЯ\neditProfile.addEventListener('submit', profileFormSubmit);\n\n// обработчик формы МО ПРОФИЛЯ\nfunction profileFormSubmit(evt) {\n  evt.preventDefault(); // сброс стандарного повведения формы\n  renderLoad(true, evt.target);\n  editUser(editProfile.name.value, editProfile.description.value)\n  .then(data => {\n    profileTitle.textContent = data.name; // получение значения name\n    profileDescription.textContent = data.about; // получение значения description\n    console.log(`Имя: ${data.name}\\nОписание: ${data.about}`);\n  })\n  .then(() => {\n    closePopup(popupEdit)\n  })\n  .catch((err) => console.log(err))\n  .finally(() => {\n    renderLoad(false, evt.target);\n  });\n};\n\n// слушалетль на форме новой КАРТОЧКИ\nnewPlace.addEventListener('submit', newPlaceFormSubmit);\n\n// обработчик формы МО новой КАРТОЧКИ\nfunction newPlaceFormSubmit(evt){\n  evt.preventDefault(); // сброс стандартного поведения кнопки\n  renderLoad(true, evt.target); // \"спиннер\"\n  const newCard = {\n    name: newPlace.placeName.value,\n    link: newPlace.link.value,\n  };\n  postCard(newCard.name, newCard.link)\n  .then((card) => {\n    const cardItem = createCard(card, card.owner, showImage, removeCard, disLike, setLike);\n    placesList.prepend(cardItem);\n    newPlace.reset();\n    closePopup(popupNewCard);\n  })\n  .catch(err => console.log(err))\n  .finally(() => {\n    renderLoad(false, evt.target);\n  })\n};\n\n// Редактирование АВАТАРА\nnewAvatar.addEventListener('submit', (evt) => {\n  evt.preventDefault();\n  renderLoad(true, evt.target);\n  editAvatar(evt.target.avatar.value)\n  .then(data => {\n    profileAvatar.style.background = `url(${data.avatar}) center / cover`;\n    console.log('Ссылка на аватар ' + data.avatar)\n  })\n  .then(() => {\n    closePopup(popupAvatar);\n  })\n  .catch(err => console.log(err))\n  .finally(() => {\n    renderLoad(false, evt.target);\n  })\n});\n\n// анимация открытия МО\npopups.forEach((item) => {\n  item.classList.add('popup_is-animated');\n})\n\n// \"Спиннер\"\nfunction renderLoad(isLoad, form) {\n  if(isLoad) {\n    form.button.textContent = 'Сохранение...';\n  } else {\n    form.button.textContent = 'Сохранить';\n  }\n};\n\n// первоначальная загрузка cards & user\nPromise.all([\n  getCards(),\n  getUser()\n])\n.then(([cards, user]) => {\n  // данные профиля\n  profileTitle.textContent = user.name;\n  profileDescription.textContent = user.about;\n  profileAvatar.style.background = `url(${user.avatar}) center / cover`;\n  // цикл массива данных карточек\n  cards.forEach((card) => {\n    const cardItem = createCard(card, user, showImage, removeCard, disLike, setLike);\n    placesList.append(cardItem);\n  })\n})\n.catch((err) => console.log(err));\n\n// удаление карточки\nconst removeCard = (item, cardId) => {\n  deleteCardAPI(cardId._id)\n  .then((data) => deleteCard(item, data.message))\n  .catch((err) => console.log(err));\n}\n\nconst setLike = (evt, cardId) => {\n  // console.log('лайк')\n  putLike(cardId)\n  .then((data) => {\n    setCount(evt, data.likes.length);\n  })\n  .catch((err) => console.log(err));\n}\n\nconst disLike = (evt, cardId) => {\n  // console.log('дизлайк')\n  deleteLike(cardId)\n  .then((data) => {\n    setCount(evt, data.likes.length);\n  })\n  .catch((err) => console.log(err));\n}\n\nenableValidation();"],"names":["openPopup","popup","classList","add","document","addEventListener","escapeHandler","closeByOverlay","closePopup","remove","removeEventListener","evt","key","querySelector","item","target","currentTarget","createCard","cardContent","user","showImage","disLike","setLike","cardItem","content","cloneNode","cardImage","cardTitle","deleteButton","likeButton","likeCount","src","link","alt","name","textContent","owner","_id","style","display","disabled","likes","some","id","length","contains","setCount","count","console","log","nextElementSibling","config","baseUrl","headers","authorization","handleResponse","res","ok","json","Promise","reject","concat","status","formSelector","inputSelector","submitButtonSelector","inactiveButtonClass","inputErrorClass","errorClass","hideError","formElement","inputElement","errorElement","toggleButtonState","inputList","buttonElement","validity","valid","hasInvalidInput","clearValidation","Array","from","querySelectorAll","forEach","value","editButton","addButton","closeButtons","avatarButton","popupEdit","popupNewCard","popupImage","popupAvatar","popups","editProfile","forms","newPlace","newAvatar","profileTitle","profileDescription","profileAvatar","placesList","image","caption","createImagePopup","renderLoad","isLoad","form","button","description","btn","closest","newName","newDecription","preventDefault","fetch","method","body","JSON","stringify","about","then","data","catch","err","finally","newLink","newCard","placeName","card","removeCard","prepend","reset","avatar","editAvatar","background","all","_ref","_ref2","cards","append","cardId","deleteCardAPI","element","message","putLike","deleteLike","patternMismatch","setCustomValidity","dataset","errorMessage","showError","validationMessage","isValid","setEventListeners"],"sourceRoot":""}